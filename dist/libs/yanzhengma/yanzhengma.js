"use strict";function draw(t){var a=$("#canvas").width(),o=$("#canvas").height(),r=document.getElementById("canvas"),e=r.getContext("2d");r.width=a,r.height=o;for(var n="a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),l=n.length,s=0;s<4;s++){var c=Math.floor(Math.random()*l),i=Math.random()-.5,d=n[c];t[s]=d.toLowerCase();var h=10+20*s,m=20+8*Math.random();e.font="bold 23px 微软雅黑",e.translate(h,m),e.rotate(i),e.fillStyle=randomColor(),e.fillText(d,0,0),e.rotate(-i),e.translate(-h,-m)}for(s=0;s<=5;s++)e.strokeStyle=randomColor(),e.beginPath(),e.moveTo(Math.random()*a,Math.random()*o),e.lineTo(Math.random()*a,Math.random()*o),e.stroke();for(s=0;s<=30;s++){e.strokeStyle=randomColor(),e.beginPath();h=Math.random()*a,m=Math.random()*o;e.moveTo(h,m),e.lineTo(h+1,m+1),e.stroke()}}function randomColor(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}$(document).ready(function(){var a=!1,t=!1,o=!1,r=!1,e=$("#mobile");e.on("blur",function(){var t=$(this).val();/^1[3,4,5,7,8]\d{9}$/.test(t)?$.get("../api/register.php",{mobile:t},function(t){a=1==t?(e.parent().next().text("该手机号可用").css("color","#58bc58"),!0):(e.parent().next().text("该手机号已被注册").css("color","red"),!1)}):(e.parent().next().text("请输入正确的手机号").css("color","red"),a=!1),h()});var n=$("#password"),l=$("#password").val();n.on("blur",function(){l=$(this).val();t=/^[a-z]\w{5,20}$/.test(l)?(n.parent().next().text("该密码符合要求").css("color","#58bc58"),!0):(n.parent().next().text("该密码不符合要求").css("color","red"),!1),h()});var s=$("#confirm_password");s.on("blur",function(){var t=$(this).val();t!=l?(s.parent().next().text("请输入一致的密码").css("color","red"),o=!1):t==l&&(s.parent().next().text("该密码可以使用").css("color","#58bc58"),o=!0),h()});var c=[];draw(c);var i=$("#imgCaptchaInput");$("#canvas").on("click",function(){draw(c)}),$(".imgCaptchaWrap").blur(function(){var t=$(".imgCaptchaWrap").val().toLowerCase(),a=c.join("");""==t?(i.parent().next().text("请输入验证码").css("color","red"),r=!1):t==a?(i.parent().next().text("验证码正确").css("color","#58bc58"),r=!0):(i.parent().next().text("验证码错误！请重新输入！").css("color","red"),r=!1,$(".imgCaptchaWrap").val("")),h()});var d=$("#register");function h(){a&&t&&o&&r?d.removeAttr("disabled"):d.attr("disabled","true")}d.on("click",function(){$.post("../api/register1.php",{mobile:e.val(),password:n.val()},function(t){t&&(window.localStorage.mobile=e.val(),window.localStorage.password=n.val(),location.href="../index.html")})})});